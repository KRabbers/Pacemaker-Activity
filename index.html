<!DOCTYPE html>
<html>
    <head>
        <link
         rel="stylesheet" href="style.css">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>
    <body>
        <div id="welcome-popup" onclick="closePopup()">
            <div id="popup-content">
              <h2>Welcome to the Pacemaker Troubleshooting Room!</h2>
              <p>Identify the troubleshooting issue by interacting with the room to help your patient and reveal the code to move on.</p>
              <p></p>Click anywhere on this box to begin!
            </div>
          </div>

        <div id="room">

            <img id="Room" src="Room.png">
            <img id="Door" src="Door.png" onclick="tryDoor()">
            <img id="Patient" src="Patient.png" onclick="tryPatient()">
            <img id="Programmer" src="Programmer.png" onclick="tryProgrammer()">
            <img id="Phone" src="Phone.png" onclick="tryPhone()">
            <img id="notecard" src="Notecard.png" onclick="tryNote()">
            <img src="https://via.placeholder.com/150" alt="Pacemaker" style="cursor:pointer;" onclick="startPuzzle()">

        </div>

        /images/
            QuickNotes.png

        <script>

            function tryDoor() {
                console.log("You tried the door...it did not open.");
                var comboTry = prompt("You enter the code to move on to your next patient...");
                if (comboTry == "PACE") {
                    alert("You entered the code correctly! You can now move on to your next patient!");
                    window.location.href = "new.html";
                } else {
                    alert("Incorrect code. Try again.");
                }
            }
        
            function tryProgrammer() {
                console.log("You clicked the programmer!");
                var comboTry = prompt("You interrogated the patient's pacemaker!\n\nDevice Data shows:\n\nUnderlying rhythm is Complete Heart Block when tested VVI 30bpm\n\nRA: Sensing - 1mV, Impedance - 887 ohms, Threshold - 0.4V @ 0.4ms\n\nRV: Sensing - NA, Impedance - 645 ohms, Threshold 0.6V @ 0.4ms\n\nArrhythmia Logbook: Multiple ATR and VT episodes correlating with patient history...\n\nWhat is the most likely troubleshooting issue?\n\nundersensing or oversensing?\n\nPlease enter your answer below:");
        
                let normalized = comboTry.trim().toLowerCase();
        
                if (normalized === "undersensing") {
                    alert("You've been given code SHOCK.");
                } else if (normalized === "oversensing") {
                    alert("You've been given code PACE.");
                } else {
                    alert("Invalid input. Please enter 'undersensing' or 'oversensing'.");
                }
            }
        
            function tryPatient() {
                console.log("You clicked the patient!");
                alert("You ask Harold how he's been feeling.\n\nHarold:\n\nI feel pretty good. I feel like I'm able to walk further than I used to. I did notice that every time I use my TENS unit, I suddenly fall asleep. My daughter says it looks like I pass out.");
            }
        
            function tryPhone() {
                console.log("You clicked the phone!");
                var comboTry = prompt("Would you like to call Tech Services? (yes or no)");
        
                if (comboTry.toLowerCase() === "yes") {
                    alert("You called Tech Services! They remind you to check if the patient is pacemaker dependent. They also remind you that using a TENS unit with a pacemaker can cause pacing inhibition.");
                } else {
                    alert("You decided not to call Tech Services. Good luck!");
                }
            }
        
            function tryNote() {
                console.log("You clicked the notecard!");
                alert("You found a note!\n\nClick on the phone to call Tech Services!");
            }

            function closePopup() {
    document.getElementById("welcome-popup").style.display = "none";
}
function startPuzzle() {
  Swal.fire({
    text: 'You have interrogated the patients pacemaker',
    imageUrl: 'images/QuickNotes.png',
    imageWidth: 400,
    imageHeight: 200,
    showCancelButton: true,
    showDenyButton: true,
    confirmButtonText: 'Increase Output',
    denyButtonText: 'Check Lead',
    cancelButtonText: 'Replace Battery'
  }).then((result) => {
    if (result.isConfirmed) {
      showImage('https://via.placeholder.com/400x200?text=Output+Increased');
    } else if (result.isDenied) {
      showImage('https://via.placeholder.com/400x200?text=Lead+Check');
    } else {
      showImage('https://via.placeholder.com/400x200?text=Battery+Replaced');
    }
  });
}

function showImage(imgUrl) {
  Swal.fire({
    title: 'Action Result',
    imageUrl: imgUrl,
    imageWidth: 400,
    imageAlt: 'Result image',
    confirmButtonText: 'Continue'
  });
}


        
        </script>
        

    </body>
</html>
